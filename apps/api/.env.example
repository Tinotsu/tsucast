# =============================================================================
# tsucast API Server Environment Variables
# =============================================================================
# Copy this file to .env and fill in the values
#
# SETUP GUIDE:
# 1. For LOCAL development: Use local Supabase, but PRODUCTION keys for
#    external services (Kokoro, R2) since they don't have local versions.
# 2. For PRODUCTION: All values should be production credentials.
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
PORT=3001
NODE_ENV=development
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Supabase (Database + Auth)
# -----------------------------------------------------------------------------
# LOCAL DEV: Use local Supabase (run `supabase start`)
#   SUPABASE_URL=http://127.0.0.1:54321
#   SUPABASE_SERVICE_ROLE_KEY=<local-service-role-key>
#
# PRODUCTION: Get from Supabase Dashboard > Settings > API
#   SUPABASE_URL=https://your-project.supabase.co
#   SUPABASE_SERVICE_ROLE_KEY=<production-service-role-key>

SUPABASE_URL=http://127.0.0.1:54321
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# -----------------------------------------------------------------------------
# Together.ai TTS (Streaming) — REQUIRED for streaming audio generation
# -----------------------------------------------------------------------------
# Get from: Together.ai Dashboard > Settings > API Keys
# Provides low-latency streaming TTS via Kokoro model
# See: https://together.ai/models/kokoro-82m

TOGETHER_API_KEY=your-together-api-key

# -----------------------------------------------------------------------------
# Kokoro TTS (RunPod Serverless) — FALLBACK for non-streaming generation
# -----------------------------------------------------------------------------
# Get from: RunPod Dashboard > Serverless > Your Endpoint
# Used as fallback when Together.ai is unavailable

KOKORO_API_URL=https://api.runpod.ai/v2/your-endpoint-id
KOKORO_API_KEY=your-runpod-api-key

# -----------------------------------------------------------------------------
# Cloudflare R2 (Audio Storage) — REQUIRED for audio storage
# -----------------------------------------------------------------------------
# Get from: Cloudflare Dashboard > R2 > Manage R2 API Tokens
# These should be the SAME for local and production

R2_ACCOUNT_ID=your-account-id
R2_ENDPOINT=https://your-account-id.r2.cloudflarestorage.com
R2_ACCESS_KEY_ID=your-access-key
R2_SECRET_ACCESS_KEY=your-secret-key
R2_BUCKET=tsucast
R2_PUBLIC_URL=https://your-public-bucket-url.r2.dev

# -----------------------------------------------------------------------------
# Stripe (Web Credit Purchases) — OPTIONAL for local dev
# -----------------------------------------------------------------------------
# Get from: Stripe Dashboard > Developers > API keys
# Use TEST keys (sk_test_*) for development, LIVE keys for production

STRIPE_SECRET_KEY=sk_test_xxx
STRIPE_WEBHOOK_SECRET=whsec_xxx

# Price IDs for credit packs (create in Stripe Dashboard > Products)
STRIPE_PRICE_COFFEE=price_xxx
STRIPE_PRICE_KEBAB=price_xxx
STRIPE_PRICE_PIZZA=price_xxx
STRIPE_PRICE_FEAST=price_xxx

# Web app URL (for Stripe checkout redirects)
WEB_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# RevenueCat (Mobile Subscriptions) — OPTIONAL for local dev
# -----------------------------------------------------------------------------
# Get from: RevenueCat Dashboard > Project Settings > API Keys

REVENUECAT_WEBHOOK_AUTH_KEY=your-webhook-auth-key
REVENUECAT_API_SECRET_KEY=sk_your-secret-key

# -----------------------------------------------------------------------------
# Sentry (Error Tracking) — OPTIONAL
# -----------------------------------------------------------------------------
# Get from: Sentry Dashboard > Settings > Projects > Client Keys
# Leave empty to disable Sentry (no-op in code)

SENTRY_DSN=

# -----------------------------------------------------------------------------
# PostHog Analytics — OPTIONAL
# -----------------------------------------------------------------------------
# Get from: PostHog Dashboard > Project Settings
# Leave empty to disable analytics (no-op in code)

POSTHOG_PROJECT_KEY=
POSTHOG_HOST=https://us.i.posthog.com

# -----------------------------------------------------------------------------
# Resend Email — OPTIONAL
# -----------------------------------------------------------------------------
# Get from: Resend Dashboard > API Keys
# Leave empty to disable email features (no-op in code)

RESEND_API_KEY=
EMAIL_FROM=noreply@tsucast.com
UNSUBSCRIBE_SECRET=
RESEND_WEBHOOK_SECRET=
EMAIL_QUEUE_ENABLED=false
